webpackJsonp([6],{"4m7M":function(t,e,a){var i=a("hcwE");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("0c2f041c",i,!0)},hcwE:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.custom-title{\r\n  text-align:center;\n}\r\n",""])},twYy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{dialogTableVisible:!1,activityPrizesList:[],activityRulesList:[],queryVo:{title:"",status:1},dataList:[],pageIndex:1,pageSize:10,totalPage:0,dataListLoading:!1,dataListSelections:[]}},activated:function(){this.getDataList()},methods:{getDataList:function(){var t=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/rain/activity/list"),method:"post",params:this.$http.adornParams({title:this.queryVo.title,status:this.queryVo.status,page:this.pageIndex,size:this.pageSize})}).then(function(e){var a=e.data;a&&0===a.code?(t.dataList=a.page.records,t.totalPage=a.page.records.total,t.pageIndex=a.page.records.pages,t.pageSize=a.page.records.size):(t.dataList=[],t.totalPage=0),t.dataListLoading=!1})},sizeChangeHandle:function(t){this.pageSize=t,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(t){this.pageIndex=t,this.getDataList()},selectionChangeHandle:function(t){this.dataListSelections=t},detailHandle:function(t){var e=this,a=t?[t]:this.dataListSelections.map(function(t){return t.id});console.log("id:"+a),this.dialogTableVisible=!0,this.$http({url:this.$http.adornUrl("/rain/activityprizes/getActivityPrizes"),method:"get",params:this.$http.adornParams({activityId:a[0]})}).then(function(t){var a=t.data;a&&0===a.code?e.activityPrizesList=a.activityPrizes:e.activityPrizesList=[],e.dataListLoading=!1}),this.$http({url:this.$http.adornUrl("/rain/activityrules/getActivityRules"),method:"get",params:this.$http.adornParams({activityId:a[0]})}).then(function(t){var a=t.data;a&&0===a.code?e.activityRulesList=a.activityRules:e.activityRulesList=[]})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mod-config"},[a("el-form",{attrs:{inline:!0,model:t.queryVo},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getDataList()}}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"参数名",clearable:""},model:{value:t.queryVo.title,callback:function(e){t.$set(t.queryVo,"title",e)},expression:"queryVo.title"}})],1),t._v(" "),a("el-form-item",[a("el-button",{on:{click:function(e){t.getDataList()}}},[t._v("查询")]),t._v(" "),t.isAuth("rain:viewactivitycurinfo:delete")?a("el-button",{attrs:{type:"danger",disabled:t.dataListSelections.length<=0},on:{click:function(e){t.detailHandle()}}},[t._v("详情")]):t._e()],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList,border:""},on:{"selection-change":t.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title","header-align":"center",align:"center",label:"活动主题"}}),t._v(" "),a("el-table-column",{attrs:{prop:"starttime","header-align":"center",align:"center",label:"开始时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"endtime","header-align":"center",align:"center",label:"结束时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"typeName","header-align":"center",align:"center",label:"类型"}})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}}),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("div",{staticClass:"custom-title"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("奖品详情")])]),t._v(" "),a("el-table",{attrs:{data:t.activityPrizesList}},[a("el-table-column",{attrs:{property:"name",label:"奖品名称",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"amount",label:"数量",width:"200"}})],1),t._v(" "),a("div",{staticClass:"custom-title"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("策略详情")])]),t._v(" "),a("el-table",{attrs:{data:t.activityRulesList}},[a("el-table-column",{attrs:{property:"userLevelName",label:"会员等级",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"enterTimes",label:"可抽奖次数",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"goalTimes",label:"最大中奖次数",width:"200"}})],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(i,l,!1,function(t){a("4m7M")},null,null);e.default=n.exports}});
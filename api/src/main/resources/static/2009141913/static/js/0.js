webpackJsonp([0],{Fs5w:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},L2JK:function(t,e,a){var i=a("Fs5w");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("007d3f6a",i,!0)},Uzb9:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{flag:!1,prizesVisible:!1,dataForm:{id:0,activityId:"",prizesid:"",amount:""},prizesType:[],dataRule:{prizesid:[{required:!0,message:"奖品不能为空",trigger:"blur"}],amount:[{required:!0,message:"数量不能为空",trigger:"blur"}]}}},methods:{init:function(t,e){var a=this;this.dataForm.activityId=e,console.log("prizes init",e),this.dataForm.id=t||0,this.prizesVisible=!0,this.$nextTick(function(){a.$refs.dataForm.resetFields(),a.dataForm.id&&(a.flag=!0,a.$http({url:a.$http.adornUrl("/rain/activityprizes/info/"+a.dataForm.id),method:"get",params:a.$http.adornParams()}).then(function(t){var e=t.data;e&&0===e.code&&(a.dataForm.id=e.activityPrizes.id,a.dataForm.activityId=e.activityPrizes.activityid,a.dataForm.prizesid=e.activityPrizes.prizesid,a.dataForm.amount=e.activityPrizes.amount)})),a.$http({url:a.$http.adornUrl("/rain/prizes/prizes"),method:"get"}).then(function(t){var e=t.data;e&&0===e.code?a.prizesType=e.prizes:a.prizesType=[]})})},dataFormSubmit:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&t.$http({url:t.$http.adornUrl("/rain/activityprizes/"+(t.dataForm.id?"update":"save")),method:"post",data:t.$http.adornData({id:t.dataForm.id||void 0,activityid:t.dataForm.activityId,prizesid:t.dataForm.prizesid,amount:t.dataForm.amount})}).then(function(e){var a=e.data;a&&0===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.prizesVisible=!1,t.$emit("refreshDataList",t.dataForm.activityId)}}):t.$message.error(a.msg)})})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.dataForm.id?"修改":"新增",modal:!1,"close-on-click-modal":!1,visible:t.prizesVisible},on:{"update:visible":function(e){t.prizesVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"80px"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.dataFormSubmit()}}},[a("el-form-item",{attrs:{label:"奖品",prop:"prizesid"}},[a("el-select",{attrs:{disabled:t.flag,placeholder:"奖品"},model:{value:t.dataForm.prizesid,callback:function(e){t.$set(t.dataForm,"prizesid",e)},expression:"dataForm.prizesid"}},t._l(t.prizesType,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"数量",prop:"amount"}},[a("el-input",{attrs:{placeholder:"数量"},model:{value:t.dataForm.amount,callback:function(e){t.$set(t.dataForm,"amount",e)},expression:"dataForm.amount"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.prizesVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]},r=a("VU/8")(i,n,!1,null,null,null);e.default=r.exports},"cdA+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("0xDb"),n={data:function(){var t=this;return{visible:!1,dataForm:{password:"",newPassword:"",confirmPassword:""},dataRule:{password:[{required:!0,message:"原密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{validator:function(e,a,i){t.dataForm.newPassword!==a?i(new Error("确认密码与新密码不一致")):i()},trigger:"blur"}]}}},computed:{userName:{get:function(){return this.$store.state.user.name}},mainTabs:{get:function(){return this.$store.state.common.mainTabs},set:function(t){this.$store.commit("common/updateMainTabs",t)}}},methods:{init:function(){var t=this;this.visible=!0,this.$nextTick(function(){t.$refs.dataForm.resetFields()})},dataFormSubmit:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&t.$http({url:t.$http.adornUrl("/sys/user/password"),method:"post",data:t.$http.adornData({password:t.dataForm.password,newPassword:t.dataForm.newPassword})}).then(function(e){var a=e.data;a&&0===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.visible=!1,t.$nextTick(function(){t.mainTabs=[],Object(i.a)(),t.$router.replace({name:"login"})})}}):t.$message.error(a.msg)})})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"修改密码",visible:t.visible,"append-to-body":!0},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"80px"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.dataFormSubmit()}}},[a("el-form-item",{attrs:{label:"账号"}},[a("span",[t._v(t._s(t.userName))])]),t._v(" "),a("el-form-item",{attrs:{label:"原密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:t.dataForm.password,callback:function(e){t.$set(t.dataForm,"password",e)},expression:"dataForm.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[a("el-input",{attrs:{type:"password"},model:{value:t.dataForm.newPassword,callback:function(e){t.$set(t.dataForm,"newPassword",e)},expression:"dataForm.newPassword"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[a("el-input",{attrs:{type:"password"},model:{value:t.dataForm.confirmPassword,callback:function(e){t.$set(t.dataForm,"confirmPassword",e)},expression:"dataForm.confirmPassword"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]},s=a("VU/8")(n,r,!1,null,null,null);e.default=s.exports},nTrf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{visible:!1,userLevel:[],dataForm:{id:0,activityid:"",userlevel:"",enterTimes:0,goalTimes:0},dataRule:{activityid:[{required:!0,message:"活动id不能为空",trigger:"blur"}],userlevel:[{required:!0,message:"会员等级不能为空",trigger:"blur"}],enterTimes:[{required:!0,message:"可抽奖次数（0为不限）不能为空",trigger:"blur"}],goalTimes:[{required:!0,message:"最大中奖次数（0为不限）不能为空",trigger:"blur"}]}}},methods:{init:function(t,e){var a=this;console.log("activityId:"+e),this.dataForm.activityid=e,this.dataForm.id=t||0,this.visible=!0,this.$nextTick(function(){a.$refs.dataForm.resetFields(),a.findUserLevel(),a.dataForm.id&&a.$http({url:a.$http.adornUrl("/rain/activityrules/info/"+a.dataForm.id),method:"get",params:a.$http.adornParams()}).then(function(t){var e=t.data;e&&0===e.code&&(a.dataForm.activityid=e.activityRules.activityid,a.dataForm.userlevel=e.activityRules.userlevel,a.dataForm.enterTimes=e.activityRules.enterTimes,a.dataForm.goalTimes=e.activityRules.goalTimes)})})},findUserLevel:function(){var t=this;this.$http({url:this.$http.adornUrl("/rain/sysdict/findQuery"),method:"get",params:this.$http.adornParams({dict_type:"rain_user_level"})}).then(function(e){var a=e.data;a&&0===a.code?(t.userLevel=a.dict,console.log(t.userLevel)):t.userLevel=[],t.dataListLoading=!1})},dataFormSubmit:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&t.$http({url:t.$http.adornUrl("/rain/activityrules/"+(t.dataForm.id?"update":"save")),method:"post",data:t.$http.adornData({id:t.dataForm.id||void 0,activityid:t.dataForm.activityid,userlevel:t.dataForm.userlevel,enterTimes:t.dataForm.enterTimes,goalTimes:t.dataForm.goalTimes})}).then(function(e){var a=e.data;a&&0===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.visible=!1,t.$emit("refreshDataList",t.dataForm.activityid)}}):t.$message.error(a.msg)})})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.dataForm.id?"修改":"新增",modal:!1,"close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"80px"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.dataFormSubmit()}}},[a("el-form-item",{attrs:{label:"会员等级",prop:"userlevel"}},[a("el-select",{attrs:{placeholder:"请选择会员等级"},model:{value:t.dataForm.userlevel,callback:function(e){t.$set(t.dataForm,"userlevel",e)},expression:"dataForm.userlevel"}},t._l(t.userLevel,function(t){return a("el-option",{key:t.dictKey,attrs:{label:t.dictValue,value:t.dictKey}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"可抽奖次数（0为不限）",prop:"enterTimes"}},[a("el-input",{attrs:{placeholder:"可抽奖次数（0为不限）"},model:{value:t.dataForm.enterTimes,callback:function(e){t.$set(t.dataForm,"enterTimes",e)},expression:"dataForm.enterTimes"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"最大中奖次数（0为不限）",prop:"goalTimes"}},[a("el-input",{attrs:{placeholder:"最大中奖次数（0为不限）"},model:{value:t.dataForm.goalTimes,callback:function(e){t.$set(t.dataForm,"goalTimes",e)},expression:"dataForm.goalTimes"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]},r=a("VU/8")(i,n,!1,null,null,null);e.default=r.exports},oZaA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"sub-menu",props:{menu:{type:Object,required:!0},dynamicMenuRoutes:{type:Array,required:!0}},components:{SubMenu:s},computed:{sidebarLayoutSkin:{get:function(){return this.$store.state.common.sidebarLayoutSkin}}},methods:{gotoRouteHandle:function(t){var e=this.dynamicMenuRoutes.filter(function(e){return e.meta.menuId===t.menuId});e.length>=1&&this.$router.push({name:e[0].name})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.menu.list&&t.menu.list.length>=1?a("el-submenu",{attrs:{index:t.menu.menuId+"","popper-class":"site-sidebar--"+t.sidebarLayoutSkin+"-popper"}},[a("template",{slot:"title"},[a("icon-svg",{staticClass:"site-sidebar__menu-icon",attrs:{name:t.menu.icon||""}}),t._v(" "),a("span",[t._v(t._s(t.menu.name))])],1),t._v(" "),t._l(t.menu.list,function(e){return a("sub-menu",{key:e.menuId,attrs:{menu:e,dynamicMenuRoutes:t.dynamicMenuRoutes}})})],2):a("el-menu-item",{attrs:{index:t.menu.menuId+""},on:{click:function(e){t.gotoRouteHandle(t.menu)}}},[a("icon-svg",{staticClass:"site-sidebar__menu-icon",attrs:{name:t.menu.icon||""}}),t._v(" "),a("span",[t._v(t._s(t.menu.name))])],1)},staticRenderFns:[]},r=a("VU/8")(i,n,!1,null,null,null),s=e.default=r.exports},z009:function(t,e,a){"use strict";var i=a("//Fk"),n=a.n(i),r=a("Rk3H");var s=a("0xDb"),o={name:"singleUpload",props:{value:String},computed:{imageUrl:function(){return this.value},imageName:function(){return null!=this.value&&""!==this.value?this.value.substr(this.value.lastIndexOf("/")+1):null},fileList:function(){return[{name:this.imageName,url:this.imageUrl}]},showFileList:{get:function(){return null!==this.value&&""!==this.value&&void 0!==this.value},set:function(t){}}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1}},methods:{emitInput:function(t){this.$emit("input",t)},handleRemove:function(t,e){this.emitInput("")},handlePreview:function(t){this.dialogVisible=!0},beforeUpload:function(t){var e=this;return new n.a(function(t,a){new n.a(function(t,e){Object(r.a)({url:r.a.adornUrl("/rain/oss/policy"),method:"get",params:r.a.adornParams({})}).then(function(e){var a=e.data;t(a)})}).then(function(a){e.dataObj.policy=a.data.policy,e.dataObj.signature=a.data.signature,e.dataObj.ossaccessKeyId=a.data.accessid,e.dataObj.key=a.data.dir+Object(s.b)()+"_${filename}",e.dataObj.dir=a.data.dir,e.dataObj.host=a.data.host,t(!0)}).catch(function(t){a(!1)})})},handleUploadSuccess:function(t,e){console.log("上传成功..."),this.showFileList=!0,this.fileList.pop(),this.fileList.push({name:e.name,url:this.dataObj.host+"/"+this.dataObj.key.replace("${filename}",e.name)}),this.emitInput(this.fileList[0].url)}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{attrs:{action:"http://bainianzhi-red-envelope-rain.oss-cn-beijing.aliyuncs.com",data:t.dataObj,"list-type":"picture",multiple:!1,"show-file-list":t.showFileList,"file-list":t.fileList,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过10MB")])],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.fileList[0].url,alt:""}})])],1)},staticRenderFns:[]};var d=a("VU/8")(o,l,!1,function(t){a("L2JK")},null,null);e.a=d.exports}});